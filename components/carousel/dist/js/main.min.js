!function(t){function e(s){if(i[s])return i[s].exports;var n=i[s]={exports:{},id:s,loaded:!1};return t[s].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){(function(e){t.exports=e.Carousel=i(3)}).call(e,function(){return this}())},,,function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=function(){function t(e){var s=e.element,n=e.getElementWidthCallback,r=void 0===n?null:n,h=e.slideChangeCallback,o=void 0===h?null:h;i(this,t),this.root=s,this.slider=this.root.querySelector(".buic-carousel__slider"),this._slideChangeCallback=o,this._getElementWidthCallback=r,this.slidesLength=this.slider.children.length,this._updateSliderWidth(),this._updateSlideWidth(),this.currentIndex=1,this.lastSlideTranslateX=0,this.currentSlideTranslateX=0,this.isDragged=!1,this.isClicked=!1,this._onStart=this._onStart.bind(this),this._onMove=this._onMove.bind(this),this._onEnd=this._onEnd.bind(this),this._onClick=this._onClick.bind(this),this._update=this._update.bind(this),this.enableDragging(),window.addEventListener("resize",this._onResize.bind(this))}return s(t,[{key:"next",value:function(){this._isLastSlide()||this.goTo(this.currentIndex+1)}},{key:"prev",value:function(){this._isFirstSlide()||this.goTo(this.currentIndex-1)}},{key:"goTo",value:function(t){this.isDragged||(t!==this.currentIndex&&"function"==typeof this._slideChangeCallback&&this._slideChangeCallback(this,t),this.currentIndex=t,this.slider.style.transform="translateX("+-(this.currentIndex-1)*this.slideWidth+"px)",this.lastSlideTranslateX=this.slideWidth*(this.currentIndex-1))}},{key:"enableDragging",value:function(){this.root.addEventListener("touchstart",this._onStart),this.root.addEventListener("touchmove",this._onMove),this.root.addEventListener("touchend",this._onEnd),this.root.addEventListener("touchcancel",this._onEnd),this.root.addEventListener("click",this._onClick),this.root.addEventListener("mousedown",this._onStart),this.root.addEventListener("mousemove",this._onMove),document.addEventListener("mouseup",this._onEnd)}},{key:"disableDragging",value:function(){this._onEnd(),this.root.removeEventListener("touchstart",this._onStart),this.root.removeEventListener("touchmove",this._onMove),this.root.removeEventListener("touchend",this._onEnd),this.root.removeEventListener("touchcancel",this._onEnd),this.root.removeEventListener("mousedown",this._onStart),this.root.removeEventListener("mousemove",this._onMove),document.removeEventListener("mouseup",this._onEnd)}},{key:"_onStart",value:function(t){this.startX=t.touches?t.touches[0].screenX:t.screenX,this.startY=t.touches?t.touches[0].screenY:t.screenY,this.currentX=this.startX,this.currentY=this.startY,this.isDragged=!0,this.rafId=requestAnimationFrame(this._update)}},{key:"_onMove",value:function(t){this.currentX=t.touches?t.touches[0].screenX:t.screenX,this.currentY=t.touches?t.touches[0].screenY:t.screenY,Math.abs(this.currentX-this.startX)>Math.abs(this.currentY-this.startY)&&t.preventDefault()}},{key:"_onEnd",value:function(){if(this.isDragged){this.slider.style.transition="";var t=Math.round(-this.currentSlideTranslateX/this.slideWidth)+1;t=Math.max(1,t),t=Math.min(t,this.slidesLength),this.isDragged=!1,this.currentIndex!==t&&(this.isClicked=!0),this.goTo(t),this.rafId&&cancelAnimationFrame(this.rafId)}}},{key:"_onClick",value:function(t){this.isClicked&&(this.isClicked=!1,t.preventDefault(),t.stopPropagation())}},{key:"_update",value:function(){if(this.isDragged){this.rafId=requestAnimationFrame(this._update);var t=this.currentX-this.startX;this.currentSlideTranslateX=t-this.lastSlideTranslateX,this.slider.style.transition="initial",this.slider.style.transform="translateX("+this.currentSlideTranslateX+"px)"}}},{key:"_getElementWidth",value:function(){return!(!this._getElementWidthCallback||"function"!=typeof this._getElementWidthCallback)&&this._getElementWidthCallback(this)}},{key:"_updateSliderWidth",value:function(){var t=this._getElementWidth();this.slider.style.width=t?this.slidesLength*t+"px":100*this.slidesLength+"%"}},{key:"_updateSlideWidth",value:function(){this.slideWidth=this.slider.getBoundingClientRect().width/this.slidesLength}},{key:"_isLastSlide",value:function(){return this.currentIndex===this.slidesLength}},{key:"_isFirstSlide",value:function(){return 1===this.currentIndex}},{key:"_onResize",value:function(){var t=this.slideWidth;this._updateSliderWidth(),this._updateSlideWidth(),t!==this.slideWidth&&this.goTo(this.currentIndex)}}]),t}();e.default=n,t.exports=e.default}]);